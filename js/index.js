var G=e=>e[Math.floor(Math.random()*e.length)],J=[{url:"https://source.unsplash.com/800x800?people",weight:10},{url:"https://source.unsplash.com/800x800?group",weight:5}],$=J.flatMap(({url:e,weight:t})=>Array(t).fill(e)),w=!1,C="",R=new FileReader,u=new Image,Y=async()=>{let e=await fetch(G($));return new Promise(t=>{let i=new Image;i.addEventListener("load",()=>{u=i,t()}),i.crossOrigin="anonymous",i.src=e.url})},s=document.getElementById("picture"),o=s.getContext("2d"),M=()=>{let e=s.getBoundingClientRect();return{offsetX:e.left,offsetY:e.top,canvasScale:e.width/800}},{offsetX:E,offsetY:x,canvasScale:a}=M(),I=!1,L,b,S=new Image;S.src="public/janecek.png";var N=493,T=897,k=1.8,n={x:500,y:800-T/k,width:N/k,height:T/k},z=e=>{let t=!!e.touches,i=Number((t?e.touches[0].clientX:e.clientX)-E),r=Number((t?e.touches[0].clientY:e.clientY)-x),l=n.x*a,d=n.y*a,f=n.width*a,h=n.height*a;i>l&&i<l+f&&r>d&&r<d+h&&(I=!0),L=i,b=r};s.addEventListener("mousedown",z);s.addEventListener("touchstart",z);s.addEventListener("mouseup",()=>{I=!1});var j=e=>{!e.type.startsWith("image/")||R.readAsDataURL(e)};s.addEventListener("dragover",e=>e.preventDefault());s.addEventListener("drop",e=>{e.preventDefault(),!(!e.dataTransfer||e.dataTransfer.files.length<=0)&&j(e.dataTransfer.files[0])});var m=async()=>{o.fillStyle="black",o.fillRect(0,0,s.width,s.height);let e=s.width/u.width,t=s.height/u.height,i=Math.max(e,t);if(o.setTransform(i,0,0,i,0,0),o.drawImage(u,0,0),o.setTransform(),o.drawImage(S,n.x,n.y,n.width,n.height),w){let r=100;o.font=`bold ${r}px 'bc-novatica-cyr'`;let l=C||"Tohle s memy",d=50,f=350,h=15;o.fillStyle="#f9dc4d",o.textBaseline="top",o.fillStyle="yellow",o.fillText(l,d+h,f+h)}},A=e=>{let t=!!e.touches,i=Number((t?e.touches[0].clientX:e.clientX)-E),r=Number((t?e.touches[0].clientY:e.clientY)-x),l=n.x*a,d=n.y*a,f=n.width*a,h=n.height*a;if(i>l&&i<l+f&&r>d&&r<d+h?s.style.cursor="pointer":s.style.cursor="initial",I){let H=i-L,O=r-b;n.x+=H/a,n.y+=O/a,m(),L=i,b=r}};s.addEventListener("mousemove",A);s.addEventListener("touchmove",A);R.addEventListener("load",e=>{u=new Image,u.addEventListener("load",()=>m()),u.src=e.target.result});var q=document.getElementById("randomize");q.addEventListener("click",async()=>{await Y(),m()});var P=document.getElementById("customImage");P.addEventListener("change",e=>{e.preventDefault(),!(e.target.files.length<=0)&&j(e.target.files[0])});var K=document.getElementById("customImageBtn");K.addEventListener("click",()=>{P.click()});var B=document.getElementById("toggleText"),p=document.getElementById("customText");B.addEventListener("click",()=>{w=!w,B.innerText=B.innerText==="Přidat text"?"Odebrat text":"Přidat text",m()});var W=async e=>{(e.type==="input"||p.value)&&(C=p.value,m())};p.addEventListener("click",W);p.addEventListener("input",W);var g=document.getElementById("slider"),U=n.width,F=n.height,D=e=>{n.width=N*(e/100),n.height=T*(e/100),n.x+=(U-n.width)/2,n.y+=(F-n.height)/2,U=n.width,F=n.height,m()};g.addEventListener("input",e=>D(e.target.value));var X=document.createElement("a");X.setAttribute("download","TohleJsmeMy.jpg");var Q=document.getElementById("save");Q.addEventListener("click",e=>{e.preventDefault(),X.setAttribute("href",s.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream")),X.click()});window.addEventListener("resize",()=>{let e=M();E=e.offsetX,x=e.offsetY,a=e.canvasScale});Y().then(()=>m());var c=[],v=-1;s.addEventListener("pointerdown",e=>c.push(e));s.addEventListener("pointermove",e=>{for(let t=0;t<c.length;t++)if(e.pointerId===c[t].pointerId){c[t]=e;break}if(c.length===2){let t=Math.abs(c[0].clientX-c[1].clientX);v>0&&(t>v&&(g.value=Number(g.value)+2,D(g.value)),t<v&&(g.value=Number(g.value)-2,D(g.value))),v=t}});var y=e=>{for(let t=0;t<c.length;t++)if(c[t].pointerId===e.pointerId){c.splice(t,1);break}c.length<2&&(v=-1)};s.addEventListener("pointerup",y);s.addEventListener("pointercancel",y);s.addEventListener("pointerout",y);s.addEventListener("pointerleave",y);
//# sourceMappingURL=index.js.map
