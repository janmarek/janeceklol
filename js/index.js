var z=e=>e[Math.floor(Math.random()*e.length)],P=[{url:"https://source.unsplash.com/800x800?people",weight:10},{url:"https://source.unsplash.com/800x800?group",weight:5}],U=P.flatMap(({url:e,weight:t})=>Array(t).fill(e)),T=new FileReader,r=new Image,X=async()=>{let e=await fetch(z(U));return new Promise(t=>{let n=new Image;n.addEventListener("load",()=>{r=n,t()}),n.crossOrigin="anonymous",n.src=e.url})},o=document.getElementById("picture"),l=o.getContext("2d"),C=new FontFace("Bebas Neue","url(public/BebasNeue-Bold.ttf)"),N=()=>{let e=o.getBoundingClientRect();return{offsetX:e.left,offsetY:e.top,canvasScale:e.width/800}},{offsetX:y,offsetY:w,canvasScale:c}=N(),I=!1,E,L,R=new Image;R.src="public/janecek.png";var M=493,b=897,x=1.8,a={x:500,y:800-b/x,width:M/x,height:b/x},Y=e=>{let t=!!e.touches,n=Number((t?e.touches[0].clientX:e.clientX)-y),s=Number((t?e.touches[0].clientY:e.clientY)-w),u=a.x*c,m=a.y*c,p=a.width*c,v=a.height*c;n>u&&n<u+p&&s>m&&s<m+v&&(I=!0),E=n,L=s};o.addEventListener("mousedown",Y);o.addEventListener("touchstart",Y);o.addEventListener("mouseup",()=>{I=!1});var W=async()=>{await C.load(),document.fonts.add(C)},D=e=>{!e.type.startsWith("image/")||T.readAsDataURL(e)};o.addEventListener("dragover",e=>e.preventDefault());o.addEventListener("drop",e=>{e.preventDefault(),!(!e.dataTransfer||e.dataTransfer.files.length<=0)&&D(e.dataTransfer.files[0])});var d=async()=>{l.fillStyle="black",l.fillRect(0,0,o.width,o.height);let e=o.width/r.width,t=o.height/r.height,n=Math.max(e,t);l.setTransform(n,0,0,n,0,0),l.drawImage(r,0,0),l.setTransform(),l.drawImage(R,a.x,a.y,a.width,a.height)},S=e=>{let t=!!e.touches,n=Number((t?e.touches[0].clientX:e.clientX)-y),s=Number((t?e.touches[0].clientY:e.clientY)-w),u=a.x*c,m=a.y*c,p=a.width*c,v=a.height*c;if(n>u&&n<u+p&&s>m&&s<m+v?o.style.cursor="pointer":o.style.cursor="initial",I){let A=n-E,_=s-L;a.x+=A/c,a.y+=_/c,d(),E=n,L=s}};o.addEventListener("mousemove",S);o.addEventListener("touchmove",S);T.addEventListener("load",e=>{r=new Image,r.addEventListener("load",()=>d()),r.src=e.target.result});var H=document.getElementById("randomize");H.addEventListener("click",async()=>{await X(),d()});var F=document.getElementById("customImage");F.addEventListener("change",e=>{e.preventDefault(),!(e.target.files.length<=0)&&D(e.target.files[0])});var O=document.getElementById("customImageBtn");O.addEventListener("click",()=>{F.click()});var h=document.getElementById("customText"),j=async e=>{(e.type==="input"||h.value)&&(currentText=h.value,d())};h.addEventListener("click",j);h.addEventListener("input",j);var Z=document.getElementById("slider"),k=e=>{a.width=M*(e/100),a.height=b*(e/100),d()};Z.addEventListener("input",e=>k(e.target.value));var B=document.createElement("a");B.setAttribute("download","TohleJsmeMy.jpg");var G=document.getElementById("save");G.addEventListener("click",e=>{e.preventDefault(),B.setAttribute("href",o.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream")),B.click()});window.addEventListener("resize",()=>{let e=N();y=e.offsetX,w=e.offsetY,c=e.canvasScale});W();X().then(()=>d());var i=[{clientX:0}],g=-1;function J(e){console.log("pd"),i.push(e)}function q(e){e.target.style.border="dashed",console.log(i);for(var t=0;t<i.length;t++)if(e.pointerId==i[t].pointerId){i[t]=e;break}if(i.length==2){var n=Math.abs(i[0].clientX-i[1].clientX);let s=document.getElementById("slider");g>0&&(n>g&&(console.log("Pinch moving OUT -> Zoom in",e),s.value=Number(s.value)+1,k(s.value)),n<g&&(console.log("Pinch moving IN -> Zoom out",e),s.value=Number(s.value)-1,k(s.value))),g=n}}function f(e){console.log("pup"),K(e),e.target.style.background="white",e.target.style.border="1px solid black",i.length<2&&(g=-1)}function K(e){for(var t=0;t<i.length;t++)if(i[t].pointerId==e.pointerId){i.splice(t,1);break}}function Q(){var e=o;e.onpointerdown=J,e.onpointermove=q,e.onpointerup=f,e.onpointercancel=f,e.onpointerout=f,e.onpointerleave=f}Q();
//# sourceMappingURL=index.js.map
