var W=e=>e[Math.floor(Math.random()*e.length)],P=[{url:"https://source.unsplash.com/800x800?people",weight:10},{url:"https://source.unsplash.com/800x800?group",weight:5}],G=P.flatMap(({url:e,weight:t})=>Array(t).fill(e)),T=new FileReader,r=new Image,X=async()=>{let e=await fetch(W(G));return new Promise(t=>{let s=new Image;s.addEventListener("load",()=>{r=s,t()}),s.crossOrigin="anonymous",s.src=e.url})},n=document.getElementById("picture"),l=n.getContext("2d"),C=new FontFace("Bebas Neue","url(public/BebasNeue-Bold.ttf)"),R=()=>{let e=n.getBoundingClientRect();return{offsetX:e.left,offsetY:e.top,canvasScale:e.width/800}},{offsetX:y,offsetY:E,canvasScale:o}=R(),I=!1,L,b,Y=new Image;Y.src="public/janecek.png";var M=493,x=897,k=1.8,a={x:500,y:800-x/k,width:M/k,height:x/k},N=e=>{let t=!!e.touches,s=Number((t?e.touches[0].clientX:e.clientX)-y),c=Number((t?e.touches[0].clientY:e.clientY)-E),m=a.x*o,g=a.y*o,p=a.width*o,w=a.height*o;s>m&&s<m+p&&c>g&&c<g+w&&(I=!0),L=s,b=c};n.addEventListener("mousedown",N);n.addEventListener("touchstart",N);n.addEventListener("mouseup",()=>{I=!1});var H=async()=>{await C.load(),document.fonts.add(C)},S=e=>{!e.type.startsWith("image/")||T.readAsDataURL(e)};n.addEventListener("dragover",e=>e.preventDefault());n.addEventListener("drop",e=>{e.preventDefault(),!(!e.dataTransfer||e.dataTransfer.files.length<=0)&&S(e.dataTransfer.files[0])});var u=async()=>{l.fillStyle="black",l.fillRect(0,0,n.width,n.height);let e=n.width/r.width,t=n.height/r.height,s=Math.max(e,t);l.setTransform(s,0,0,s,0,0),l.drawImage(r,0,0),l.setTransform(),l.drawImage(Y,a.x,a.y,a.width,a.height)},F=e=>{let t=!!e.touches,s=Number((t?e.touches[0].clientX:e.clientX)-y),c=Number((t?e.touches[0].clientY:e.clientY)-E),m=a.x*o,g=a.y*o,p=a.width*o,w=a.height*o;if(s>m&&s<m+p&&c>g&&c<g+w?n.style.cursor="pointer":n.style.cursor="initial",I){let z=s-L,U=c-b;a.x+=z/o,a.y+=U/o,u(),L=s,b=c}};n.addEventListener("mousemove",F);n.addEventListener("touchmove",F);T.addEventListener("load",e=>{r=new Image,r.addEventListener("load",()=>u()),r.src=e.target.result});var J=document.getElementById("randomize");J.addEventListener("click",async()=>{await X(),u()});var j=document.getElementById("customImage");j.addEventListener("change",e=>{e.preventDefault(),!(e.target.files.length<=0)&&S(e.target.files[0])});var O=document.getElementById("customImageBtn");O.addEventListener("click",()=>{j.click()});var f=document.getElementById("customText"),A=async e=>{(e.type==="input"||f.value)&&(currentText=f.value,u())};f.addEventListener("click",A);f.addEventListener("input",A);var d=document.getElementById("slider"),B=e=>{a.width=M*(e/100),a.height=x*(e/100),u()};d.addEventListener("input",e=>B(e.target.value));var D=document.createElement("a");D.setAttribute("download","TohleJsmeMy.jpg");var q=document.getElementById("save");q.addEventListener("click",e=>{e.preventDefault(),D.setAttribute("href",n.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream")),D.click()});window.addEventListener("resize",()=>{let e=R();y=e.offsetX,E=e.offsetY,o=e.canvasScale});H();X().then(()=>u());var i=[],h=-1;n.addEventListener("pointerdown",e=>i.push(e));n.addEventListener("pointermove",e=>{for(let t=0;t<i.length;t++)if(e.pointerId===i[t].pointerId){i[t]=e;break}if(i.length===2){let t=Math.abs(i[0].clientX-i[1].clientX);h>0&&(t>h&&(d.value=Number(d.value)+2,B(d.value)),t<h&&(d.value=Number(d.value)-2,B(d.value))),h=t}});var v=e=>{for(let t=0;t<i.length;t++)if(i[t].pointerId===e.pointerId){i.splice(t,1);break}i.length<2&&(h=-1)};n.addEventListener("pointerup",v);n.addEventListener("pointercancel",v);n.addEventListener("pointerout",v);n.addEventListener("pointerleave",v);
//# sourceMappingURL=index.js.map
